<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ratears</title>
  
  <subtitle>ratears&#39;s blog</subtitle>
  <link href="https://ratears.github.io/dev.ratears.life/atom.xml" rel="self"/>
  
  <link href="https://ratears.github.io/dev.ratears.life/"/>
  <updated>2023-03-01T16:30:35.000Z</updated>
  <id>https://ratears.github.io/dev.ratears.life/</id>
  
  <author>
    <name>ratears</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Redis Study Notes(4):Redis Persistence</title>
    <link href="https://ratears.github.io/dev.ratears.life/Redis-Study-Notes-4-Redis-Persistence/"/>
    <id>https://ratears.github.io/dev.ratears.life/Redis-Study-Notes-4-Redis-Persistence/</id>
    <published>2023-03-01T16:30:35.000Z</published>
    <updated>2023-03-01T16:30:35.000Z</updated>
    
    <content type="html"><![CDATA[<br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><p>1</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="70%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;br&gt;

&lt;br&gt;

&lt;h1 id=&quot;学习备注&quot;&gt;&lt;a href=&quot;#学习备注&quot; class=&quot;headerlink&quot; title=&quot;学习备注&quot;&gt;&lt;/a&gt;学习备注&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure cla</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>《深入浅出分布式技术原理》study notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/%E3%80%8A%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%88%86%E5%B8%83%E5%BC%8F%E6%8A%80%E6%9C%AF%E5%8E%9F%E7%90%86%E3%80%8Bstudy-notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/%E3%80%8A%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%88%86%E5%B8%83%E5%BC%8F%E6%8A%80%E6%9C%AF%E5%8E%9F%E7%90%86%E3%80%8Bstudy-notes/</id>
    <published>2023-02-24T18:10:57.000Z</published>
    <updated>2023-02-24T18:10:57.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="开篇词-1讲"><a href="#开篇词-1讲" class="headerlink" title="开篇词 (1讲)"></a>开篇词 (1讲)</h1><h2 id="开篇词｜掌握好学习路径，分布式系统原来如此简单"><a href="#开篇词｜掌握好学习路径，分布式系统原来如此简单" class="headerlink" title="开篇词｜掌握好学习路径，分布式系统原来如此简单"></a>开篇词｜掌握好学习路径，分布式系统原来如此简单</h2><ul><li>分布式系统，已经是互联网公司 IT 架构的事实标准</li><li>是否能系统性地理解分布式系统是初级工程师和资深工程师之间最显著的差别</li></ul><h3 id="学习路径的重要性"><a href="#学习路径的重要性" class="headerlink" title="学习路径的重要性"></a>学习路径的重要性</h3><ul><li>在做架构设计和选型的时候，没有知识系统做支撑，不能系统性地思考，处理问题也没有十足的把握</li><li><strong>先要有分布式技术的一些实践和经验。经历一个分布式系统从小到大，从简单到复杂的完整演进过程。</strong>（这样可以对分布式系统有更全面、深刻的认知，熟悉分布式系统中每一个组件的设计原则，能够站在一个全局的角度，去思考分布式系统中各个组件之间的关联与取舍。对分布式系统也有清晰的知识脉络与理解）</li><li>一定要有一条明确的学习路径，从最根本的原因出发<ul><li>多问自己为什么</li><li>思考怎么做</li><li>在技术理解与实践中反复横跳，才能由点成线</li><li>在总结中抓住技术实现的关键点和系统脉络，不迷失于细节，才能连线成网</li></ul></li></ul><h3 id="课程设计"><a href="#课程设计" class="headerlink" title="课程设计"></a>课程设计</h3><ul><li><strong>首先，找到分布式系统中稳定不变的知识、原理和解决思路。</strong>比如注册发现的原理、故障处理的思路和 CAP 理论等等（分布式系统技术要点多，但万变不离其宗）</li><li><strong>其次，去繁从简。</strong><ul><li>只聚焦于日常工作中接触最频繁的在线业务分布式系统，依据是否有状态将其分为“分布式计算”和“分布式存储”这两大部分，从简单到复杂依次介绍分布式系统的相关知识与原理</li></ul></li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/fab78448a78d69c9891f9e6b64a620a.u2bzdet8v28.webp" width="100%"><br><h4 id="学习计划"><a href="#学习计划" class="headerlink" title="学习计划"></a>学习计划</h4><ul><li><strong>专栏将分为四个递进的模块，学习计划如下</strong></li></ul><h5 id="概述篇"><a href="#概述篇" class="headerlink" title="概述篇"></a>概述篇</h5><blockquote><p><strong>学习一个知识应该先理解这个知识的来龙去脉</strong>，我们先讨论分布式系统产生的过程：它为什么会产生，产生后解决了什么问题，又带来了哪些新问题，遇到哪些方面的挑战。</p><p>通过“概述篇”的学习，可以比较好地抓到分布式系统的脉络和关键点，有了很强的学习目标和路径，就不会迷失在各种系统和框架实现的细节中了。</p></blockquote><h5 id="分布式计算篇"><a href="#分布式计算篇" class="headerlink" title="分布式计算篇"></a>分布式计算篇</h5><blockquote><p><strong>从单机系统演进到分布式系统后，引入哪些新问题的角度，在技术原理层面一个一个讨论并解决这些问题。</strong></p><p>学习之后，可以在各种系统和场景中理解和运用它，并且知道在系统设计层面应该如何取舍。</p></blockquote><h5 id="分布式存储篇"><a href="#分布式存储篇" class="headerlink" title="分布式存储篇"></a>分布式存储篇</h5><blockquote><p>分布式技术篇中的进阶篇，我们对计算进行分布式扩展后，再一起来讨论存储的分布式扩展。这里我们从简单到复杂，一起讨论数据分片、数据复制、分布式事务和一致性等相关的知识。</p><p>掌握之后，再做架构设计时，你会发现思维的深度和广度都得到了提升。</p></blockquote><h5 id="总结篇"><a href="#总结篇" class="headerlink" title="总结篇"></a>总结篇</h5><blockquote><p>此时，已经对分布式系统的重要原理有了系统性地理解，这个时候，我们再一起来看分布式系统的发展历程和未来趋势。</p><p>我们从分布式计算的角度，一起讨论分布式系统是怎么从单机系统演进到 Service Mesh的；还会从分布式存储的角度，一起讨论分布式系统是怎么从单机系统的 ACID 演进到NewSQL 的。</p></blockquote><ul><li><strong>这个专栏最大的价值就是能够系统性地解决你的问题，不需要花费大量的精力再进行一次低效的探索。</strong></li></ul><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li>[知乎：如何系统性的学习分布式系统?](如何系统性的学习分布式系统? - kylin的回答 - 知乎 <a class="link"   href="https://www.zhihu.com/question/320812569/answer/1386491563" >https://www.zhihu.com/question/320812569/answer/1386491563<i class="fas fa-external-link-alt"></i></a>)</li></ul><br><br><br><h1 id="概述篇-3讲"><a href="#概述篇-3讲" class="headerlink" title="概述篇 (3讲)"></a>概述篇 (3讲)</h1><h2 id="01｜导读：以前因后果为脉络，串起网状知识体系"><a href="#01｜导读：以前因后果为脉络，串起网状知识体系" class="headerlink" title="01｜导读：以前因后果为脉络，串起网状知识体系"></a>01｜导读：以前因后果为脉络，串起网状知识体系</h2><h3 id="前因：分布式系统解决了什么问题"><a href="#前因：分布式系统解决了什么问题" class="headerlink" title="前因：分布式系统解决了什么问题"></a>前因：分布式系统解决了什么问题</h3><br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><p>1</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="70%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;开篇词-1讲&quot;&gt;&lt;a href=&quot;#开篇词-1讲&quot; class=&quot;headerlink&quot; title=&quot;开篇词 (1讲)&quot;&gt;&lt;/a&gt;开篇词 (1讲)&lt;/h1&gt;&lt;h2 id=&quot;开篇词｜掌握好学习路径，分布式系统原来如此简单&quot;&gt;&lt;a href=&quot;#开篇词｜掌握好学习路</summary>
      
    
    
    
    <category term="distributed" scheme="https://ratears.github.io/dev.ratears.life/Categories/distributed/"/>
    
    
    <category term="distributed" scheme="https://ratears.github.io/dev.ratears.life/Tags/distributed/"/>
    
  </entry>
  
  <entry>
    <title>《Java分布式系统解决方案 掌握企业级分布式项目方案》study notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/%E3%80%8AJava%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-%E6%8E%8C%E6%8F%A1%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%88%86%E5%B8%83%E5%BC%8F%E9%A1%B9%E7%9B%AE%E6%96%B9%E6%A1%88%E3%80%8Bstudy-notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/%E3%80%8AJava%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-%E6%8E%8C%E6%8F%A1%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%88%86%E5%B8%83%E5%BC%8F%E9%A1%B9%E7%9B%AE%E6%96%B9%E6%A1%88%E3%80%8Bstudy-notes/</id>
    <published>2023-02-23T14:16:11.000Z</published>
    <updated>2023-02-23T14:16:11.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="玩转N种企业级解决方案，笑傲分布式开发"><a href="#玩转N种企业级解决方案，笑傲分布式开发" class="headerlink" title="玩转N种企业级解决方案，笑傲分布式开发"></a>玩转N种企业级解决方案，笑傲分布式开发</h1><ul><li>分布式场景下解决方案和技术选型</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/5c4bb4f9e8f8cd64ebc31749fbe2f03.7glrt6915tc0.webp" width="90%"><br><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.skrnvv5d32o.webp" width="90%"><br><ul><li>SpringCloud和分布式解决方案<ul><li>SpringCloud是分布式架构，一定需要分布式解决方案</li></ul></li></ul><ul><li><strong>目标</strong>：掌握常见分布式场景中的解决方案</li></ul><br><br><br><h1 id="分布式ID"><a href="#分布式ID" class="headerlink" title="分布式ID"></a>分布式ID</h1><br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><p>1</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="70%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;玩转N种企业级解决方案，笑傲分布式开发&quot;&gt;&lt;a href=&quot;#玩转N种企业级解决方案，笑傲分布式开发&quot; class=&quot;headerlink&quot; title=&quot;玩转N种企业级解决方案，笑傲分布式开发&quot;&gt;&lt;/a&gt;玩转N种企业级解决方案，笑傲分布式开发&lt;/h1&gt;&lt;ul&gt;
</summary>
      
    
    
    
    <category term="distributed" scheme="https://ratears.github.io/dev.ratears.life/Categories/distributed/"/>
    
    
    <category term="distributed" scheme="https://ratears.github.io/dev.ratears.life/Tags/distributed/"/>
    
  </entry>
  
  <entry>
    <title>《Java分布式架构设计与开发实战》study notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/%E3%80%8AJava%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E3%80%8Bstudy-notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/%E3%80%8AJava%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E3%80%8Bstudy-notes/</id>
    <published>2023-02-22T04:06:25.000Z</published>
    <updated>2023-02-22T04:06:25.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="课程导学与学习指南"><a href="#课程导学与学习指南" class="headerlink" title="课程导学与学习指南"></a>课程导学与学习指南</h1><ul><li>课程内容设计（结合实际应用场景）</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.73j7o3a193k0.webp" width="70%"><br><ul><li>内容兼具深度、广度</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.oxikmcilqsw.webp" width="70%"><br><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.41p3fu3lo7i0.webp" width="70%"><br><br><br><h1 id="硅步千里，分布式理论加强内功修炼"><a href="#硅步千里，分布式理论加强内功修炼" class="headerlink" title="硅步千里，分布式理论加强内功修炼"></a>硅步千里，分布式理论加强内功修炼</h1><h2 id="本章节目标"><a href="#本章节目标" class="headerlink" title="本章节目标"></a>本章节目标</h2><ul><li>了解大型互联网系统演进</li><li>掌握架构设计思想</li><li>掌握CAP理论</li><li>掌握BASE理论</li></ul><br><ul><li>中国互联网发展历程<ul><li>1994 - 2000年:从四大门户到搜索</li><li>2001-2009年:从搜索到社交化网络</li><li>2010- 至今:移动互联网和自媒体</li></ul></li></ul><br><h2 id="单体应用架构到分布式架构的演进"><a href="#单体应用架构到分布式架构的演进" class="headerlink" title="单体应用架构到分布式架构的演进"></a>单体应用架构到分布式架构的演进</h2><ul><li>单体应用架构<ul><li>Linux+Apache+MySQL+PHP</li><li>网站刚起步的时候，流量少。用一台服务器就可以满足</li></ul></li><li>应用服务与数据服务分离<ul><li>访问增加，带来更大压力</li><li>增加配置解决临时问题</li><li>从横向进行扩展，一分为多</li></ul></li><li>不同服务器配置要求不同</li></ul><table><thead><tr><th align="center">服务器类型</th><th align="center">不同配置要求</th></tr></thead><tbody><tr><td align="center">应用服务器</td><td align="center">CPU配置高</td></tr><tr><td align="center">数据库服务器</td><td align="center">磁盘IO快和稳，内存足够大</td></tr><tr><td align="center">文件服务器</td><td align="center">磁盘足够大</td></tr></tbody></table><ul><li><p>开始引入缓存</p><ul><li>大量交易访问数据库压力增大，响应延迟</li><li>给数据库减负，把请求在前面就处理完</li><li>在数据库前面加入缓存</li></ul></li><li><p>应用服务器集群部署</p><ul><li>所有的请求直接打到负载均衡组件</li><li>单台服务器 &gt;多台服务器</li><li>软件: Apache / Nginx / HaProxy / LVS</li><li>硬件:F5</li></ul></li><li><p>数据库的读写分离</p><ul><li>并非所有请求都操作缓存，且存在缓存失效场景，对数据库访问造成压力</li><li>利用数据库主从复制机制，将读和写操作分开，进一步提升性能</li></ul></li><li><p>数据库访问模块</p><ul><li>对接多个数据源、处理读写分离、甚至分库分表等</li><li>独立于应用程序存在的</li><li>Apache ShardingSphere</li></ul></li><li><p>内容分发网络 - CDN</p></li><li><p>CDN服务进行资源加速</p><ul><li>把静态资源提前缓存到各地的边缘服务器</li><li>可以有效地降低DDoS攻击</li></ul></li><li><p>全面分布式化</p><ul><li>随着规模不断发展产生数据越来越多，单文件件服务器、单数据库服务器也渐渐地达到瓶颈。利用集群化横向扩展解决问题</li><li>HDFS、TFS、FastDFS</li><li>NoSQL &amp; 搜索引擎<ul><li>Lucene是一个搜索引擎的开发工具包:全文检索</li><li>Solr和Elasticsearch它们是基于Lucene开发的</li><li>常见的NoSQL有Mongodb和ELasticsearch</li></ul></li></ul></li><li><p><strong>单体应用面临诸多问题和挑战</strong></p><ul><li>单体应用的代码膨胀，研发成本变高，难实现敏捷交付</li><li>代码维护成本变高，开发人员交接困难</li><li>测试成本变高，回归的工作量变大，给测试带来巨大工作量</li><li>可扩展性差，技术升级时需考虑整体，无法单独调整</li></ul></li><li><p>“大而全的单体”拆分为多个“独立的应用”</p></li><li><p>应用拆分和解耦</p><ul><li>对应用模块进行拆分之后，通过消息中间件进行交互</li><li>此外还有异步处理应用解耦、流量削峰等作用</li></ul></li><li><p>常见的消息中间件</p></li></ul><table><thead><tr><th align="center">消息中间件特性</th><th></th></tr></thead><tbody><tr><td align="center">ActiveMQ</td><td>历史悠久，使用Java语言编写的，功能全面，基本上MQ的功能它都有，因此也比较复杂。</td></tr><tr><td align="center">RabbitMQ</td><td>目前主流之一，跟Spring框架师出同门，因此Spring对RabbitMQ的支持最好</td></tr><tr><td align="center">Kafka</td><td>高性能方面比较有优势。但一开始是基于大吞吐量数据场景设计，在消息可靠性方面比较弱</td></tr><tr><td align="center">RocketMQ</td><td>它相对前面几个，有后发优势，结合了各方优点综合能力比较好。</td></tr></tbody></table><ul><li>模块拆分引发的问题<ul><li>代码冗余，多处相同的代码维护起来困难</li><li>复杂度扩散</li><li>共用一套数据库资源</li></ul></li></ul><br><h2 id="引入服务化架构"><a href="#引入服务化架构" class="headerlink" title="引入服务化架构"></a>引入服务化架构</h2><h3 id="SOA与微服务对比"><a href="#SOA与微服务对比" class="headerlink" title="SOA与微服务对比"></a>SOA与微服务对比</h3><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.2zz2vosvmw60.webp" width="70%"><br><table><thead><tr><th align="center"></th><th>SOA</th><th>微服务</th></tr></thead><tbody><tr><td align="center">共同点</td><td>都是在分布式环境下，以服务为中心的松耦合应用架构模式服务之间是通过定义明确的接口和协议来进行相互通信</td><td>都是在分布式环境下，以服务为中心的松耦合应用架构模式服务之间是通过定义明确的接口和协议来进行相互通信</td></tr><tr><td align="center">目标</td><td>解决的是异构系统的服务化</td><td>解决互联网系统快速交付</td></tr><tr><td align="center">规模</td><td>相对粗粒度</td><td>细粒度</td></tr><tr><td align="center">适用性</td><td>跨企业、大企业跨部门的复杂应用系统建设</td><td>适合小型团队的持续化发布</td></tr></tbody></table><h1 id="为快不破，分布式缓存提升系统性能"><a href="#为快不破，分布式缓存提升系统性能" class="headerlink" title="为快不破，分布式缓存提升系统性能"></a>为快不破，分布式缓存提升系统性能</h1><br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><p>1</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="70%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;课程导学与学习指南&quot;&gt;&lt;a href=&quot;#课程导学与学习指南&quot; class=&quot;headerlink&quot; title=&quot;课程导学与学习指南&quot;&gt;&lt;/a&gt;课程导学与学习指南&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;课程内容设计（结合实际应用场景）&lt;/li&gt;
&lt;/ul&gt;
&lt;img src</summary>
      
    
    
    
    <category term="distributed" scheme="https://ratears.github.io/dev.ratears.life/Categories/distributed/"/>
    
    
    <category term="distributed" scheme="https://ratears.github.io/dev.ratears.life/Tags/distributed/"/>
    
  </entry>
  
  <entry>
    <title>Redis study notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/Redis-study-notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/Redis-study-notes/</id>
    <published>2023-02-18T22:45:02.000Z</published>
    <updated>2023-02-18T22:45:02.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="NoSQL-简介"><a href="#NoSQL-简介" class="headerlink" title="NoSQL 简介"></a>NoSQL 简介</h1><ul><li>NoSQL（“non-relational”， “Not Only SQL”），泛指非关系型的数据库。随着互联网 web2.0网站的兴起，传统的关系数据库在处理 web2.0 网站，特别是超大规模和高并发的 SNS 类型的 web2.0 纯动态网站已经显得力不从心，出现了很多难以克服的问题，而非关系型的数据库则由于其本身的特点得到了非常迅速的发展。NoSQL 数据库的产生就是为了解决大规模数据集合多重数据种类带来的挑战，特别是大数据应用难题。</li></ul><br><h2 id="键值存储数据库"><a href="#键值存储数据库" class="headerlink" title="键值存储数据库"></a>键值存储数据库</h2><ul><li>就像 Map 一样的 key-value 对。典型代表就是 Redis。</li></ul><br><h2 id="列存储数据库"><a href="#列存储数据库" class="headerlink" title="列存储数据库"></a>列存储数据库</h2><ul><li>关系型数据库是典型的行存储数据库。其存在的问题是，按行存储的数据在物理层面占用的是连续存储空间，不适合海量数据存储。而按列存储则可实现分布式存储，适合海量存储。典型代表是 HBase。</li></ul><br><h2 id="文档型数据库"><a href="#文档型数据库" class="headerlink" title="文档型数据库"></a>文档型数据库</h2><ul><li> NoSQL 与关系型数据的结合，最像关系型数据库的 NoSQL。典型代表是 MongoDB。</li></ul><br><h2 id="图形-Graph-数据库"><a href="#图形-Graph-数据库" class="headerlink" title="图形(Graph) 数据库"></a>图形(Graph) 数据库</h2><ul><li>用于存放一个节点关系的数据库，例如描述不同人间的关系。典型代表是 Neo4J。</li></ul><br><br><br><h1 id="NoSQL-VS-关系型数据库"><a href="#NoSQL-VS-关系型数据库" class="headerlink" title="NoSQL VS 关系型数据库"></a>NoSQL VS 关系型数据库</h1><ul><li></li></ul><br><br><br><h1 id="Redis-概述"><a href="#Redis-概述" class="headerlink" title="Redis 概述"></a>Redis 概述</h1><h2 id="Redis-简介"><a href="#Redis-简介" class="headerlink" title="Redis 简介"></a>Redis 简介</h2><ul><li>Redis，Remote Dictionary Server，远程字典服务，由意大利人 Salvatore Sanfilippo（又名 Antirez）开发，是一个使用 ANSI C 语言编写、支持网络、可基于内存亦可持久化的日志型、NoSQL 开源内存数据库，其提供多种语言的 API。从 2010 年 3 月 15 日起，Redis 的开发工作由 VMware 主持。从2013 年 5 月开始，Redis 的开发由 Pivotal 赞助。</li><li>2008 年时 Salvatore Sanfilippo 自己开发一个叫 LLOOGG 的网站。</li><li>Redis之所以称之为字典服务，是因为 Redis 是一个 key-value存储系统。支持存储的 value类型很多，包括 String(字符串)、List(链表)、Set(集合)、Zset(sorted set –有序集合)和 Hash（哈希类型）等。</li><li>Redis 的国际知名用户有，Twitter、GitHub、Facebook 等，国内知名用户有，阿里巴巴、腾讯、百度、搜狐、优酷、美团、小米等。熟练使用和运维 Redis 已经成为开发运维人员的一个必备技能。</li></ul><br><h2 id="Redis-的用途"><a href="#Redis-的用途" class="headerlink" title="Redis 的用途"></a>Redis 的用途</h2><h3 id="数据缓存"><a href="#数据缓存" class="headerlink" title="数据缓存"></a>数据缓存</h3><ul><li>客户端从 DBMS（Database Management System） 中查询出的数据首先写入到 Redis 中，后续无论哪个客户端再需要访问该数据，直接读取 Redis 中的即可，不仅减小了 RT（response time 简称RT，响应时间：从系统接收请求开始到返回响应之间的时间跨度），而且降低了 DBMS 的压力。</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/1677190973987.1jn6209v28ww.webp" width="70%"><br><ul><li>根据 Redis 缓存的数据与 DBMS 中数据的同步性划分，缓存一般可划分为两类：实时同步缓存，与阶段性同步缓存。</li><li>实时同步缓存是指，DBMS 中数据更新后，Redis 缓存中的存放的相关数据会被立即清除，以促使再有对该数据的访问请求到来时，必须先从 DBMS 中查询获取到最新数据，然后再写入到 Redis。</li><li>阶段性同步缓存是指，Redis 缓存中的数据允许在一段时间内与 DBMS 中的数据不完全一致。而这个时间段就是这个缓存数据的过期时间。</li></ul><br><h2 id="Redis-的特性"><a href="#Redis-的特性" class="headerlink" title="Redis 的特性"></a>Redis 的特性</h2><blockquote><p>能够做缓存的技术、中间件很多，例如，MyBatis 自带的二级缓存、Memched 等。之所以在生产中做缓存的产品几乎无一例外的会选择 Redis，是因为它有很多其它产品所不具备的特性。</p></blockquote><ul><li>性能极高：Redis 读的速度可以达到 11w 次/s，写的速度可以达到 8w 次/s。</li></ul><blockquote><p>之所以具有这么高的性能，因为以下几点原因：</p><p>（1）Redis 的所有操作都是在内存中发生的。</p><p>（2）Redis 是用 C 语言开发的。</p><p>（3）Redis 源码非常精细（集性能与优雅于一身）。</p></blockquote><ul><li>简单稳定：Redis 源码很少。早期版本只有 2w 行左右。从 3.0 版本开始，增加了集群功能，代码变为了 5w 行左右。</li><li>持久化：Redis 内存中的数据可以进行持久化，其有两种方式：RDB 与 AOF。</li><li>高可用集群：Redis 提供了高可用的主从集群功能，可以确保系统的安全性。</li><li>丰富的数据类型：Redis 是一个 key-value 存储系统。支持存储的 value 类型很多，包括String(字符串)、List(链表)、Set(集合)、Zset(sorted set –有序集合)和 Hash（哈希类型）等，还有 BitMap、HyperLogLog、Geospatial 类型。<ul><li>BitMap：一般用于大数据量的二值性统计</li><li>HyperLogLog：其是 Hyperlog Log，用于对数据量超级庞大的日志做去重统计</li><li>Geospatial：地理空间，其主要用于地理位置相关的计算</li></ul></li><li>强大的功能：Redis 提供了数据过期功能、发布/订阅功能、简单事务功能，还支持 Lua脚本扩展功能。</li><li>客户端语言广泛：Redis提供了简单的TCP通信协议，编程语言可以方便地的接入Redis。所以，有很多的开源社区、大公司等开发出了很多语言的 Redis 客户端。</li><li>支持 ACL 权限控制：之前的权限控制非常笨拙。从 Redis6 开始引入了 ACL 模块，可以为不同用户定制不同的用户权限。</li></ul><blockquote><ul><li>ACL，Access Control List，访问控制列表，是一种细粒度的权限管理策略，可以针对任意用户与组进行权限控制。目前大多数 Unix 系统与 Linux 2.6 版本已经支持 ACL 了。</li><li>Zookeeper 早已支持 ACL 了。</li><li>Unix 与 Linux 系统默认使用是 UGO（User、Group、Other）权限控制策略，其是一种粗粒度的权限管理策略。</li></ul></blockquote><ul><li>支持多线程 IO 模型：Redis 之前版本采用的是单线程模型，从 6.0 版本开始支持了多线程模型。</li></ul><br><h2 id="Redis-的IO模型"><a href="#Redis-的IO模型" class="headerlink" title="Redis 的IO模型"></a>Redis 的IO模型</h2><ul><li>Redis 客户端提交的各种请求是如何最终被 Redis 处理的？Redis 处理客户端请求所采用的处理架构，称为 Redis 的 IO 模型。不同版本的 Redis 采用的 IO 模型是不同的</li></ul><h3 id="单线程模型"><a href="#单线程模型" class="headerlink" title="单线程模型"></a>单线程模型</h3><ul><li>对于 Redis 3.0 及其以前版本，Redis 的 IO 模型采用的是<strong>纯粹的单线程模型</strong>。即所有客户端的请求全部由一个线程处理。</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.6sosx0t4lqw0.webp" width="70%"><br><ul><li>Redis 的单线程模型采用了多路复用技术。</li></ul><blockquote><ul><li>对于多路复用器的多路选择算法常见的有三种：select 模型、poll 模型、epoll 模型。<ul><li>poll 模型的选择算法：采用的是轮询算法。该模型对客户端的就绪处理是有延迟的</li><li>epoll 模型的选择算法：采用的是回调方式。根据就绪事件发生后的处理方式的不同，又可分为 LT 模型与 ET 模型。</li></ul></li></ul></blockquote><ul><li><p>每个客户端若要向 Redis 提交请求，都需要与 Redis 建立一个 socket 连接，并向事件分发器注册一个事件。一旦该事件发生就表明该连接已经就绪。而一旦连接就绪，事件分发器就会感知到，然后获取客户端通过该连接发送的请求，并将由该事件分发器所绑定的这个唯一的线程来处理。如果该线程还在处理多个任务，则将该任务写入到任务队列等待线程处理。</p></li><li><p>之所以称为事件分发器，是因为它会根据不同的就绪事件，将任务交由不同的事件处理<br>器去处理。</p></li></ul><h3 id="混合线程模型"><a href="#混合线程模型" class="headerlink" title="混合线程模型"></a>混合线程模型</h3><ul><li>从 Redis 4.0 版本开始，Redis 中就开始加入了多线程元素。处理客户端请求的仍是单线程模型，但对于一些比较耗时但又不影响对客户端的响应的操作，就由后台其它线程来处理。例如，持久化、对 AOF 的 rewrite、对失效连接的清理等。</li></ul><h3 id="多线程模型"><a href="#多线程模型" class="headerlink" title="多线程模型"></a>多线程模型</h3><ul><li>Redis 6.0 版本，才是真正意义上的多线程模型。因为其对于客户端请求的处理采用的是多线程模型。</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.7ge3bn7lv0o0.webp" width="70%"><br><ul><li>多线程 IO 模型中的“多线程”仅用于接受、解析客户端的请求，然后将解析出的请求写入到任务队列。而对具体任务（命令）的处理，仍是由主线程处理。这样做使得用户无需考虑线程安全问题，无需考虑事务控制，无需考虑像 LPUSH/LPOP 等命令的执行顺序问题。</li></ul><h3 id="Redis-的-IO-模型优缺点总结"><a href="#Redis-的-IO-模型优缺点总结" class="headerlink" title="Redis 的 IO 模型优缺点总结"></a>Redis 的 IO 模型优缺点总结</h3><table><thead><tr><th></th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>单线程模型</td><td>可维护性高，性能高。<br/>不存在并发读写情况，所以也就不存在执行顺序的不确定性，不存在线程切换开销，不存在死锁问题，不存在为了数据安全而进行的加锁/解锁开销。</td><td>性能会受到影响，且由于单线程只能使用一个处理器，所以会形成处理器浪费。</td></tr><tr><td>多线程模型</td><td>其结合了多线程与单线程的优点，避开了它们的所有不足</td><td>该模型没有显示不足。<br/>如果非要找其不足的话就是，其并非是一个真正意义上的“多线程”，因为真正处理“任务”的线程仍是单线程。所以，其对性能也是有些影响的。</td></tr></tbody></table><br><br><br><h1 id="Redis-的安装与配置"><a href="#Redis-的安装与配置" class="headerlink" title="Redis 的安装与配置"></a>Redis 的安装与配置</h1><h2 id="Redis-的安装"><a href="#Redis-的安装" class="headerlink" title="Redis 的安装"></a>Redis 的安装</h2><h3 id="安装前的准备工作"><a href="#安装前的准备工作" class="headerlink" title="安装前的准备工作"></a>安装前的准备工作</h3><ul><li>服务器选择CentOS 7.x，需要安装 gcc、gcc-c++</li></ul><blockquote><p>由于 Redis 是由 C/C++语言编写的，而从官网下载的 Redis 安装包是需要编译后才可安装的，所以对其进行编译就必须要使用相关编译器。对于 C/C++语言的编译器，使用最多的是gcc与gcc-c++，而这两款编译器在CentOS7中是没有安装的，所以首先要安装这两款编译器。</p><p>GCC，GNU Compiler Collection，GNU 编译器集合。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc gcc-c++</span><br></pre></td></tr></table></figure><h3 id="下载-上传-Redis-安装包"><a href="#下载-上传-Redis-安装包" class="headerlink" title="下载/上传 Redis 安装包"></a>下载/上传 Redis 安装包</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/</span><br><span class="line">wget https://github.com/redis/redis/archive/7.0.8.tar.gz</span><br><span class="line"></span><br><span class="line">tar -zxvf 7.0.8.tar.gz</span><br><span class="line"></span><br><span class="line">[root@localhost opt]# ls</span><br><span class="line">7.0.8.tar.gz  redis-7.0.8</span><br></pre></td></tr></table></figure><h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><ul><li>编译过程是根据 Makefile 文件进行的，而 Redis 解压包中已经存在该文件了。所以可以直接进行编译了。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# cd /opt/redis-7.0.8/</span><br><span class="line">[root@localhost redis-7.0.8]# ll</span><br><span class="line">total 264</span><br><span class="line">-rw-rw-r--  1 root root  40942 Jan 17 00:40 00-RELEASENOTES</span><br><span class="line">-rw-rw-r--  1 root root     51 Jan 17 00:40 BUGS</span><br><span class="line">-rw-rw-r--  1 root root   5027 Jan 17 00:40 CODE_OF_CONDUCT.md</span><br><span class="line">-rw-rw-r--  1 root root   2634 Jan 17 00:40 CONTRIBUTING.md</span><br><span class="line">-rw-rw-r--  1 root root   1487 Jan 17 00:40 COPYING</span><br><span class="line">drwxrwxr-x  7 root root    119 Jan 17 00:40 deps</span><br><span class="line">-rw-rw-r--  1 root root     11 Jan 17 00:40 INSTALL</span><br><span class="line">-rw-rw-r--  1 root root    151 Jan 17 00:40 Makefile</span><br><span class="line">-rw-rw-r--  1 root root   6888 Jan 17 00:40 MANIFESTO</span><br><span class="line">-rw-rw-r--  1 root root  22441 Jan 17 00:40 README.md</span><br><span class="line">-rw-rw-r--  1 root root 106545 Jan 17 00:40 redis.conf</span><br><span class="line">-rwxrwxr-x  1 root root    279 Jan 17 00:40 runtest</span><br><span class="line">-rwxrwxr-x  1 root root    283 Jan 17 00:40 runtest-cluster</span><br><span class="line">-rwxrwxr-x  1 root root   1613 Jan 17 00:40 runtest-moduleapi</span><br><span class="line">-rwxrwxr-x  1 root root    285 Jan 17 00:40 runtest-sentinel</span><br><span class="line">-rw-rw-r--  1 root root   1695 Jan 17 00:40 SECURITY.md</span><br><span class="line">-rw-rw-r--  1 root root  14005 Jan 17 00:40 sentinel.conf</span><br><span class="line">drwxrwxr-x  4 root root   8192 Jan 17 00:40 src</span><br><span class="line">drwxrwxr-x 11 root root    199 Jan 17 00:40 tests</span><br><span class="line">-rw-rw-r--  1 root root   3055 Jan 17 00:40 TLS.md</span><br><span class="line">drwxrwxr-x  8 root root   4096 Jan 17 00:40 utils</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis-7.0.8]# make</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">    LINK redis-server</span><br><span class="line">    INSTALL redis-sentinel</span><br><span class="line">    CC redis-cli.o</span><br><span class="line">    CC redisassert.o</span><br><span class="line">    CC cli_common.o</span><br><span class="line">    LINK redis-cli</span><br><span class="line">    CC redis-benchmark.o</span><br><span class="line">    LINK redis-benchmark</span><br><span class="line">    INSTALL redis-check-rdb</span><br><span class="line">    INSTALL redis-check-aof</span><br><span class="line"></span><br><span class="line">Hint: It&#x27;s a good idea to run &#x27;make test&#x27; ;)</span><br><span class="line"></span><br><span class="line">make[1]: Leaving directory `/opt/redis-7.0.8/src&#x27;</span><br><span class="line">[root@localhost redis-7.0.8]#</span><br></pre></td></tr></table></figure><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul><li>在 Linux 中对于编译过的安装包执行 <code>make install</code> 进行安装</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis-7.0.8]# make install</span><br><span class="line">cd src &amp;&amp; make install</span><br><span class="line">which: no python3 in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin)</span><br><span class="line">make[1]: Entering directory `/opt/redis-7.0.8/src&#x27;</span><br><span class="line">    CC Makefile.dep</span><br><span class="line">make[1]: Leaving directory `/opt/redis-7.0.8/src&#x27;</span><br><span class="line">which: no python3 in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin)</span><br><span class="line">make[1]: Entering directory `/opt/redis-7.0.8/src&#x27;</span><br><span class="line"></span><br><span class="line">Hint: It&#x27;s a good idea to run &#x27;make test&#x27; ;)</span><br><span class="line"></span><br><span class="line">    INSTALL redis-server</span><br><span class="line">    INSTALL redis-benchmark</span><br><span class="line">    INSTALL redis-cli</span><br><span class="line">make[1]: Leaving directory `/opt/redis-7.0.8/src&#x27;</span><br><span class="line">[root@localhost redis-7.0.8]#</span><br></pre></td></tr></table></figure><ul><li>至此，Redis安装完成。可以看到，共安装了三个组件：redis 服务器、客户端与一个性能测试工具 benchmark。</li></ul><h3 id="查看-bin-目录"><a href="#查看-bin-目录" class="headerlink" title="查看 bin 目录"></a>查看 bin 目录</h3><ul><li>安装完成后，打开/usr/local/bin 目录，可以看到出现了很多的文件。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# cd /usr/local/bin/</span><br><span class="line">[root@localhost bin]# ll</span><br><span class="line">total 21560</span><br><span class="line">-rwxr-xr-x 1 root root    32592 Mar 26  2021 earlyoom</span><br><span class="line">-rwxr-xr-x 1 root root  5198152 Feb 24 07:07 redis-benchmark</span><br><span class="line">lrwxrwxrwx 1 root root       12 Feb 24 07:07 redis-check-aof -&gt; redis-server</span><br><span class="line">lrwxrwxrwx 1 root root       12 Feb 24 07:07 redis-check-rdb -&gt; redis-server</span><br><span class="line">-rwxr-xr-x 1 root root  5411488 Feb 24 07:07 redis-cli</span><br><span class="line">lrwxrwxrwx 1 root root       12 Feb 24 07:07 redis-sentinel -&gt; redis-server</span><br><span class="line">-rwxr-xr-x 1 root root 11427160 Feb 24 07:07 redis-server</span><br></pre></td></tr></table></figure><ul><li>通过 <code>echo $PATH</code> 可以看到，/usr/local/bin 目录是存在于该系统变量中的，这样这些命令就可以在任意目录中执行了。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# echo $PATH</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br></pre></td></tr></table></figure><br><h2 id="Redis-启动与停止"><a href="#Redis-启动与停止" class="headerlink" title="Redis 启动与停止"></a>Redis 启动与停止</h2><h3 id="前台启动"><a href="#前台启动" class="headerlink" title="前台启动"></a>前台启动</h3><ul><li>在任意目录执行redis-server命令即可启动Redis。这种启动方式会占用当前命令行窗口。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# redis-server</span><br><span class="line">6717:C 24 Feb 2023 07:13:54.221 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span><br><span class="line">6717:C 24 Feb 2023 07:13:54.221 # Redis version=7.0.8, bits=64, commit=00000000, modified=0, pid=6717, just started</span><br><span class="line">6717:C 24 Feb 2023 07:13:54.221 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf</span><br><span class="line">6717:M 24 Feb 2023 07:13:54.221 * monotonic clock: POSIX clock_gettime</span><br><span class="line">                _._</span><br><span class="line">           _.-``__ &#x27;&#x27;-._</span><br><span class="line">      _.-``    `.  `_.  &#x27;&#x27;-._           Redis 7.0.8 (00000000/0) 64 bit</span><br><span class="line">  .-`` .-```.  ```\/    _.,_ &#x27;&#x27;-._</span><br><span class="line"> (    &#x27;      ,       .-`  | `,    )     Running in standalone mode</span><br><span class="line"> |`-._`-...-` __...-.``-._|&#x27;` _.-&#x27;|     Port: 6379</span><br><span class="line"> |    `-._   `._    /     _.-&#x27;    |     PID: 6717</span><br><span class="line">  `-._    `-._  `-./  _.-&#x27;    _.-&#x27;</span><br><span class="line"> |`-._`-._    `-.__.-&#x27;    _.-&#x27;_.-&#x27;|</span><br><span class="line"> |    `-._`-._        _.-&#x27;_.-&#x27;    |           https://redis.io</span><br><span class="line">  `-._    `-._`-.__.-&#x27;_.-&#x27;    _.-&#x27;</span><br><span class="line"> |`-._`-._    `-.__.-&#x27;    _.-&#x27;_.-&#x27;|</span><br><span class="line"> |    `-._`-._        _.-&#x27;_.-&#x27;    |</span><br><span class="line">  `-._    `-._`-.__.-&#x27;_.-&#x27;    _.-&#x27;</span><br><span class="line">      `-._    `-.__.-&#x27;    _.-&#x27;</span><br><span class="line">          `-._        _.-&#x27;</span><br><span class="line">              `-.__.-&#x27;</span><br><span class="line"></span><br><span class="line">6717:M 24 Feb 2023 07:13:54.221 # Server initialized</span><br><span class="line">6717:M 24 Feb 2023 07:13:54.221 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add &#x27;vm.overcommit_memory = 1&#x27; to /etc/sysctl.conf and then reboot or run the command &#x27;sysctl vm.overcommit_memory=1&#x27; for this to take effect.</span><br><span class="line">6717:M 24 Feb 2023 07:13:54.222 * Ready to accept connections</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>再开启一个会话窗口，可以查看到当前的 Redis 进程，默认端口号为 6379。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps -ef |grep redis</span><br><span class="line">root      6717  2057  0 07:13 pts/2    00:00:00 redis-server *:6379</span><br><span class="line">root      6755  6726  0 07:14 pts/3    00:00:00 grep --color=auto redis</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="命令式后台启动"><a href="#命令式后台启动" class="headerlink" title="命令式后台启动"></a>命令式后台启动</h3><ul><li>使用 nohub 命令，最后再添加一个&amp;符，可以使要启动的程序在后台以守护进程方式运行。这样的好处是，进程启动后不会占用一个会话窗口，且其还会在当前目录，即运行启动命令的当前目录中创建一个 nohup.out 文件用于记录 Redis 的操作日志。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup redis-server &amp;</span><br></pre></td></tr></table></figure><h3 id="配置式后台启动"><a href="#配置式后台启动" class="headerlink" title="配置式后台启动"></a>配置式后台启动</h3><ul><li>使用 nohup 命令可以使 Redis 后台启动，但每次都要键入 nohup 与&amp;符，比较麻烦。可以通过修改 Linux 中 Redis 的核心配置文件 redis.conf 达到后台启动的目的。redis.conf 文件在Redis 的安装目录根下。</li></ul><h2 id="Redis-连接前配置"><a href="#Redis-连接前配置" class="headerlink" title="Redis 连接前配置"></a>Redis 连接前配置</h2><h3 id="绑定客户端-IP"><a href="#绑定客户端-IP" class="headerlink" title="绑定客户端 IP"></a>绑定客户端 IP</h3><ul><li>Redis 可以通过修改配置文件来限定可以访问自己的客户端 IP</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">bind</span> 127.0.0.1 -::1</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">以上设置（默认设置,未注释），只允许当前主机访问当前的 Redis，其它主机均不可访问。所以，如果不想限定访问的客户端，只需要将该行注释掉即可。</span></span><br></pre></td></tr></table></figure><h3 id="关闭保护模式"><a href="#关闭保护模式" class="headerlink" title="关闭保护模式"></a>关闭保护模式</h3><ul><li>默认保护模式是开启的。其只允许本机的客户端访问，即只允许自己访问自己。但生产中应该关闭，以确保其它客户端可以连接 Redis。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protected-mode no</span><br></pre></td></tr></table></figure><h3 id="设置访问密码"><a href="#设置访问密码" class="headerlink" title="设置访问密码"></a>设置访问密码</h3><ul><li>为 Redis 设置访问密码，可以对要读/写 Redis 的用户进行身份验证。没有密码的用户可以登录 Redis，但无法访问。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requirepass redis</span><br></pre></td></tr></table></figure><br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><ol><li>用途写的太单薄了，需要重构</li><li>缓存划分</li></ol></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="70%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;NoSQL-简介&quot;&gt;&lt;a href=&quot;#NoSQL-简介&quot; class=&quot;headerlink&quot; title=&quot;NoSQL 简介&quot;&gt;&lt;/a&gt;NoSQL 简介&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;NoSQL（“non-relational”， “Not Only SQL”），</summary>
      
    
    
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/Categories/DataBase/"/>
    
    <category term="NoSQL" scheme="https://ratears.github.io/dev.ratears.life/Categories/DataBase/NoSQL/"/>
    
    <category term="Redis" scheme="https://ratears.github.io/dev.ratears.life/Categories/DataBase/NoSQL/Redis/"/>
    
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/Tags/DataBase/"/>
    
    <category term="Redis" scheme="https://ratears.github.io/dev.ratears.life/Tags/Redis/"/>
    
    <category term="NoSQL" scheme="https://ratears.github.io/dev.ratears.life/Tags/NoSQL/"/>
    
  </entry>
  
  <entry>
    <title>《Java设计模式精讲 Debug方式+内存分析》study notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/%E3%80%8AJava%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B2%BE%E8%AE%B2-Debug%E6%96%B9%E5%BC%8F-%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E3%80%8Bstudy-notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/%E3%80%8AJava%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B2%BE%E8%AE%B2-Debug%E6%96%B9%E5%BC%8F-%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E3%80%8Bstudy-notes/</id>
    <published>2023-02-18T17:05:28.000Z</published>
    <updated>2023-02-18T17:05:28.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="简单工厂"><a href="#简单工厂" class="headerlink" title="简单工厂"></a>简单工厂</h1><h2 id="类型与定义"><a href="#类型与定义" class="headerlink" title="类型与定义"></a>类型与定义</h2><ul><li>定义:由一个工厂对象决定创建出哪一种产品类的实例</li><li>类型:创建型，但不属于GOF23种设计模式</li></ul><br><h2 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h2><ul><li>工厂类负责创建的对象比较少</li><li>客户端(应用层)只知道传入工厂类的参数，对于如何创建对象(逻辑)不关心</li></ul><br><h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ul><li>只需要传入一个正确的参数，就可以获取你所需要的对象而无须知道其创建细节</li></ul><br><h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><ul><li>工厂类的职责相对过重，如果增加新的产品需要修改工厂类的判断逻辑，违背开闭原则</li></ul><br><h2 id="Coding"><a href="#Coding" class="headerlink" title="Coding"></a>Coding</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Coder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Javaer</span> <span class="keyword">extends</span> <span class="title class_">Coder</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I&#x27;m a Java programmer，I can use Java programming .&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Gopher</span> <span class="keyword">extends</span> <span class="title class_">Coder</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I&#x27;m a Go programmer，I can use Go programming .&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CoderFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Coder <span class="title function_">createCoder</span><span class="params">(Class clazz)</span> &#123;</span><br><span class="line">        <span class="type">Coder</span> <span class="variable">coder</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            coder = (Coder) Class.forName(clazz.getName()).newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> coder;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Coder</span> <span class="variable">coder</span> <span class="operator">=</span> CoderFactory.createCoder(Javaer.class);</span><br><span class="line">        coder.coding();</span><br><span class="line"></span><br><span class="line">        Coder coder1= CoderFactory.createCoder(Gopher.class);</span><br><span class="line">        coder1.coding();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a>源码分析</h2><h3 id="java-util-Calendar"><a href="#java-util-Calendar" class="headerlink" title="java.util.Calendar"></a>java.util.Calendar</h3><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.6ybjgo0ug3o0.webp" width="60%"><br><h3 id="ch-qos-logback-classic-LoggerContext"><a href="#ch-qos-logback-classic-LoggerContext" class="headerlink" title="ch.qos.logback.classic.LoggerContext"></a>ch.qos.logback.classic.LoggerContext</h3><ul><li>其中，既使用到了<strong>简单工厂</strong>又使用到了<strong>工厂方法模式</strong></li></ul><br><br><br><h1 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h1><h2 id="定义与类型"><a href="#定义与类型" class="headerlink" title="定义与类型"></a>定义与类型</h2><ul><li>定义:定义一个创建对象的接口，但让实现这个接口的类来决定实例化哪个类，工厂方法让类的实例化推迟到子类中进行</li><li>类型:创建型</li></ul><br><h2 id="适用场景-1"><a href="#适用场景-1" class="headerlink" title="适用场景"></a>适用场景</h2><ul><li>创建对象需要大量重复的代码</li><li>客户端(应用层)不依赖于产品类实例如何被创建、实现等细节</li><li>一个类通过其子类来指定创建哪个对象</li></ul><br><h2 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h2><ul><li>用户只需要关心所需产品对应的工厂，无须关心创建细节</li><li>加入新产品符合开闭原则，提高可扩展性</li></ul><br><h2 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h2><ul><li>类的个数容易过多，增加复杂度</li><li>增加了系统的抽象性和理解难度</li></ul><br><h2 id="Coding-1"><a href="#Coding-1" class="headerlink" title="Coding"></a>Coding</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Coder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Gopher</span> <span class="keyword">extends</span> <span class="title class_">Coder</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I&#x27;m a Go programmer，I can use Go programming .&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Javaer</span> <span class="keyword">extends</span> <span class="title class_">Coder</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">coding</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I&#x27;m a Java programmer，I can use Java programming .&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">CoderFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> Coder <span class="title function_">createCoder</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GopherFactory</span> <span class="keyword">extends</span> <span class="title class_">CoderFactory</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Coder <span class="title function_">createCoder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Gopher</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaerFactory</span> <span class="keyword">extends</span> <span class="title class_">CoderFactory</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Coder <span class="title function_">createCoder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Javaer</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">CoderFactory</span> <span class="variable">coderFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JavaerFactory</span>();</span><br><span class="line">        <span class="type">Coder</span> <span class="variable">coder</span> <span class="operator">=</span> coderFactory.createCoder();</span><br><span class="line">        coder.coding();</span><br><span class="line">        <span class="type">CoderFactory</span> <span class="variable">coderFactory2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GopherFactory</span>();</span><br><span class="line">        <span class="type">Coder</span> <span class="variable">coder2</span> <span class="operator">=</span> coderFactory2.createCoder();</span><br><span class="line">        coder2.coding();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="源码分析-1"><a href="#源码分析-1" class="headerlink" title="源码分析"></a>源码分析</h2><ul><li>jdk源码中的 Collection类 <code>Iterator&lt;E&gt; iterator();</code>，就使用了工厂方法，Iterator是抽象产品。ArrayList中有具体实现。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Itr</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>jdk源码Luncher类中</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Factory</span> <span class="keyword">implements</span> <span class="title class_">URLStreamHandlerFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">PREFIX</span> <span class="operator">=</span> <span class="string">&quot;sun.net.www.protocol&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Factory</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> URLStreamHandler <span class="title function_">createURLStreamHandler</span><span class="params">(String var1)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">var2</span> <span class="operator">=</span> PREFIX + <span class="string">&quot;.&quot;</span> + var1 + <span class="string">&quot;.Handler&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Class</span> <span class="variable">var3</span> <span class="operator">=</span> Class.forName(var2);</span><br><span class="line">            <span class="keyword">return</span> (URLStreamHandler)var3.newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ReflectiveOperationException var4) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">InternalError</span>(<span class="string">&quot;could not load &quot;</span> + var1 + <span class="string">&quot;system protocol handler&quot;</span>, var4);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><br><h1 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h1><h2 id="定义与类型-1"><a href="#定义与类型-1" class="headerlink" title="定义与类型"></a>定义与类型</h2><ul><li>定义: 抽象工厂模式提供一个创建一系列相关或相互依赖对象的接口</li><li>无须指定它们具体的类</li><li>类型:创建型</li></ul><br><h2 id="适用场景-2"><a href="#适用场景-2" class="headerlink" title="适用场景"></a>适用场景</h2><ul><li>客户端(应用层)不依赖于产品类实例如何被创建、实现等细节</li><li>强调一系列相关的产品对象(属于同一产品族)一起使用创建对象需要大量重复的代码</li><li>提供一个产品类的库，所有的产品以同样的接口出现从而使客户端不依赖于具体实现</li></ul><br><h2 id="优点-2"><a href="#优点-2" class="headerlink" title="优点"></a>优点</h2><ul><li>具体产品在应用层代码隔离，无须关心创建细节</li><li>将一个系列的产品族统一到一起创建</li></ul><br><h2 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h2><ul><li>规定了所有可能被创建的产品集合，产品族中扩展新的产品困难需要修改抽象工厂的接口</li><li>增加了系统的抽象性和理解难度</li></ul><br><h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><h3 id="产品等级结构与产品族"><a href="#产品等级结构与产品族" class="headerlink" title="产品等级结构与产品族"></a>产品等级结构与产品族</h3><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/fdadc29cbe12236d1d5629647483893.26md45jh7ugw.webp" width="70%"><br><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/0c56cc305ffdc39902f3003fdf0e623.hqr3956keq8.webp" width="70%"><br><h2 id="Coding-2"><a href="#Coding-2" class="headerlink" title="Coding"></a>Coding</h2><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.6pduwxhaon80.webp" width="100%"><br><h2 id="源码分析-2"><a href="#源码分析-2" class="headerlink" title="源码分析"></a>源码分析</h2><ul><li>java.sql.connection</li></ul><br><br><br><h1 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h1><h2 id="定义与类型-2"><a href="#定义与类型-2" class="headerlink" title="定义与类型"></a>定义与类型</h2><ul><li>定义: 将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示</li><li>用户只需指定需要建造的类型就可以得到它们，建造过程及细节不需要知道</li><li>类型:创建型</li></ul><br><h2 id="适用场景-3"><a href="#适用场景-3" class="headerlink" title="适用场景"></a>适用场景</h2><ul><li>如果一个对象有非常复杂的内部结构(很多属性)</li><li>想把复杂对象的创建和使用分离</li></ul><br><h2 id="优点-3"><a href="#优点-3" class="headerlink" title="优点"></a>优点</h2><ul><li>封装性好，创建和使用分离</li><li>扩展性好、建造类之间独立、一定程度上解耦</li></ul><br><h2 id="缺点-3"><a href="#缺点-3" class="headerlink" title="缺点"></a>缺点</h2><ul><li>产生多余的Builder对象</li><li>产品内部发生变化，建造者都要修改，成本较大</li></ul><br><h2 id="Coding-3"><a href="#Coding-3" class="headerlink" title="Coding"></a>Coding</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Computer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String cpu;</span><br><span class="line">    <span class="keyword">private</span> String ram;</span><br><span class="line">    <span class="keyword">private</span> String usbCount;</span><br><span class="line">    <span class="keyword">private</span> String keyboard;</span><br><span class="line">    <span class="keyword">private</span> String display;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Computer</span><span class="params">(ComputerBuilder computerBuilder)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cpu = computerBuilder.cpu;</span><br><span class="line">        <span class="built_in">this</span>.ram = computerBuilder.ram;</span><br><span class="line">        <span class="built_in">this</span>.usbCount = computerBuilder.usbCount;</span><br><span class="line">        <span class="built_in">this</span>.keyboard = computerBuilder.keyboard;</span><br><span class="line">        <span class="built_in">this</span>.display = computerBuilder.display;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Computer&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;cpu=&#x27;&quot;</span> + cpu + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, ram=&#x27;&quot;</span> + ram + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, usbCount=&#x27;&quot;</span> + usbCount + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, keyboard=&#x27;&quot;</span> + keyboard + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, display=&#x27;&quot;</span> + display + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ComputerBuilder</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String cpu;</span><br><span class="line">        <span class="keyword">private</span> String ram;</span><br><span class="line">        <span class="keyword">private</span> String usbCount;</span><br><span class="line">        <span class="keyword">private</span> String keyboard;</span><br><span class="line">        <span class="keyword">private</span> String display;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ComputerBuilder <span class="title function_">buildCpu</span><span class="params">(String cpu)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.cpu=cpu;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ComputerBuilder <span class="title function_">buildRam</span><span class="params">(String ram)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.ram=ram;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ComputerBuilder <span class="title function_">buildUsbCount</span><span class="params">(String usbCount)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.usbCount=usbCount;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ComputerBuilder <span class="title function_">buildKeyboard</span><span class="params">(String keyboard)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.keyboard=keyboard;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ComputerBuilder <span class="title function_">buildDisplay</span><span class="params">(String display)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.display=display;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Computer <span class="title function_">build</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Computer</span>(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Computer</span> <span class="variable">computer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Computer</span>.ComputerBuilder().buildCpu(<span class="string">&quot;I7处理器&quot;</span>).buildCpu(<span class="string">&quot;三星125&quot;</span>).build();</span><br><span class="line">    System.out.println(computer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="源码分析-3"><a href="#源码分析-3" class="headerlink" title="源码分析"></a>源码分析</h2><ul><li>java.lang.StringBuilder</li><li>java.lang.StringBuffer</li><li>org.apache.ibatis.session.SqlSessionFactoryBuilder</li></ul><br><br><br><h1 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h1><h2 id="定义与类型-3"><a href="#定义与类型-3" class="headerlink" title="定义与类型"></a>定义与类型</h2><ul><li></li></ul><br><h2 id="适用场景-4"><a href="#适用场景-4" class="headerlink" title="适用场景"></a>适用场景</h2><ul><li></li></ul><br><h2 id="优点-4"><a href="#优点-4" class="headerlink" title="优点"></a>优点</h2><ul><li></li></ul><br><h2 id="缺点-4"><a href="#缺点-4" class="headerlink" title="缺点"></a>缺点</h2><ul><li></li></ul><br><h2 id="Coding-4"><a href="#Coding-4" class="headerlink" title="Coding"></a>Coding</h2><br><h2 id="源码分析-4"><a href="#源码分析-4" class="headerlink" title="源码分析"></a>源码分析</h2><ul><li></li></ul><br><br><br><h1 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h1><h2 id="定义与类型-4"><a href="#定义与类型-4" class="headerlink" title="定义与类型"></a>定义与类型</h2><ul><li></li></ul><br><h2 id="适用场景-5"><a href="#适用场景-5" class="headerlink" title="适用场景"></a>适用场景</h2><ul><li></li></ul><br><h2 id="优点-5"><a href="#优点-5" class="headerlink" title="优点"></a>优点</h2><ul><li></li></ul><br><h2 id="缺点-5"><a href="#缺点-5" class="headerlink" title="缺点"></a>缺点</h2><ul><li></li></ul><br><h2 id="Coding-5"><a href="#Coding-5" class="headerlink" title="Coding"></a>Coding</h2><br><h2 id="源码分析-5"><a href="#源码分析-5" class="headerlink" title="源码分析"></a>源码分析</h2><ul><li></li></ul><br><br><br><h1 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h1><br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><ol><li>源码分析这块是不是需要加强一下 ？</li><li>建造者模式这块还是要好好熟悉手写一下，是否面向对象的知识需要好好补充</li></ol></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="70%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;简单工厂&quot;&gt;&lt;a href=&quot;#简单工厂&quot; class=&quot;headerlink&quot; title=&quot;简单工厂&quot;&gt;&lt;/a&gt;简单工厂&lt;/h1&gt;&lt;h2 id=&quot;类型与定义&quot;&gt;&lt;a href=&quot;#类型与定义&quot; class=&quot;headerlink&quot; title=&quot;类型与定义&quot;&gt;</summary>
      
    
    
    
    <category term="Design Pattern" scheme="https://ratears.github.io/dev.ratears.life/Categories/Design-Pattern/"/>
    
    
    <category term="Design Pattern" scheme="https://ratears.github.io/dev.ratears.life/Tags/Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>《MySQL 必知必会》study notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/%E3%80%8AMySQL-%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8Bstudy-notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/%E3%80%8AMySQL-%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8Bstudy-notes/</id>
    <published>2023-02-13T07:45:40.000Z</published>
    <updated>2023-02-13T07:45:40.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="课前准备-2讲"><a href="#课前准备-2讲" class="headerlink" title="课前准备 (2讲)"></a>课前准备 (2讲)</h1><h2 id="开篇词-在实战中学习，是解锁MySQL技能的最佳方法"><a href="#开篇词-在实战中学习，是解锁MySQL技能的最佳方法" class="headerlink" title="开篇词 | 在实战中学习，是解锁MySQL技能的最佳方法"></a>开篇词 | 在实战中学习，是解锁MySQL技能的最佳方法</h2><br><br><br><h2 id="环境准备-带你安装MySQL和图形化管理工具Workbench"><a href="#环境准备-带你安装MySQL和图形化管理工具Workbench" class="headerlink" title="环境准备 | 带你安装MySQL和图形化管理工具Workbench"></a>环境准备 | 带你安装MySQL和图形化管理工具Workbench</h2><br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><p>1</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="70%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;课前准备-2讲&quot;&gt;&lt;a href=&quot;#课前准备-2讲&quot; class=&quot;headerlink&quot; title=&quot;课前准备 (2讲)&quot;&gt;&lt;/a&gt;课前准备 (2讲)&lt;/h1&gt;&lt;h2 id=&quot;开篇词-在实战中学习，是解锁MySQL技能的最佳方法&quot;&gt;&lt;a href=&quot;#开篇词</summary>
      
    
    
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/Categories/DataBase/"/>
    
    <category term="MySQL" scheme="https://ratears.github.io/dev.ratears.life/Categories/DataBase/MySQL/"/>
    
    
    <category term="MySQL" scheme="https://ratears.github.io/dev.ratears.life/Tags/MySQL/"/>
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/Tags/DataBase/"/>
    
  </entry>
  
  <entry>
    <title>《高并发 高性能 高可用 MySQL 实战》study notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/%E3%80%8A%E9%AB%98%E5%B9%B6%E5%8F%91-%E9%AB%98%E6%80%A7%E8%83%BD-%E9%AB%98%E5%8F%AF%E7%94%A8-MySQL-%E5%AE%9E%E6%88%98%E3%80%8Bstudy-notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/%E3%80%8A%E9%AB%98%E5%B9%B6%E5%8F%91-%E9%AB%98%E6%80%A7%E8%83%BD-%E9%AB%98%E5%8F%AF%E7%94%A8-MySQL-%E5%AE%9E%E6%88%98%E3%80%8Bstudy-notes/</id>
    <published>2023-02-12T18:51:22.000Z</published>
    <updated>2023-02-12T18:51:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第1章-课程介绍"><a href="#第1章-课程介绍" class="headerlink" title="第1章 课程介绍"></a>第1章 课程介绍</h1><h2 id="问卷调查"><a href="#问卷调查" class="headerlink" title="问卷调查"></a>问卷调查</h2><ol><li>你真的搞懂MySQL底层原理了吗?</li><li>你知道如何改善慢查询性能吗?</li><li>你知道如何架设高性能集群吗?</li><li>你知道未来数据库的发展趋势吗?</li></ol><br><ul><li>以上，这些问题很重要! 因为<ul><li>工作中: MySQL高性能集群越来越流行</li><li>面试中:深入考察MySQL原理、性能调优</li><li>职业规划:需要根据技术发展方向选择职业路径</li></ul></li></ul><br><h2 id="精通MySQL，应该怎么学"><a href="#精通MySQL，应该怎么学" class="headerlink" title="精通MySQL，应该怎么学"></a>精通MySQL，应该怎么学</h2><blockquote><ol><li>以技术原理作为坚实基础</li><li>以真实场景作为学习环境</li><li>以架构思维作为学习目标</li></ol></blockquote><blockquote><p>下面三点是课程主线：</p></blockquote><br><h3 id="（1）从理论到实战"><a href="#（1）从理论到实战" class="headerlink" title="（1）从理论到实战"></a>（1）从理论到实战</h3><ul><li>从数据表逻辑结构，到优化数据表的性能</li><li>从数据查询原理，到改善慢SQL性能</li><li>从事务原理，到优化事务执行效率</li></ul><br><h3 id="（2）从单点到集群"><a href="#（2）从单点到集群" class="headerlink" title="（2）从单点到集群"></a>（2）从单点到集群</h3><ul><li>从学习单点原理，到掌握集群原理</li><li>从高性能单点，到高性能集群</li><li>从单点快速部署，到集群快速部署</li></ul><br><h3 id="（3）从现在到未来"><a href="#（3）从现在到未来" class="headerlink" title="（3）从现在到未来"></a>（3）从现在到未来</h3><ul><li>从5.x版本，到8.0版本</li><li>从原生单体数据库，到原生分布式数据库</li><li>从学习技术原理，到理解技术趋势</li></ul><br><h2 id="什么是“三高”"><a href="#什么是“三高”" class="headerlink" title="什么是“三高”"></a>什么是“三高”</h2><ul><li>高并发：同时处理的事务数高</li><li>高性能：事务/SQL的执行速度高</li><li>高可用：系统可用时间高</li></ul><br><ul><li><strong>“三高”只是目的，不是手段。手段有：复制、扩展、切换</strong></li></ul><br><h3 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h3><ul><li>目的:数据冗余</li><li>手段: binlog传送</li><li>收获:并发量提升、可用性提升</li><li>问题:占用更多硬件资源</li></ul><br><h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><ul><li>目的:扩展数据库容量</li><li>手段:数据分片分库、分表</li><li>收获:性能、并发量的提升</li><li>问题:可能降低可用性</li></ul><br><h3 id="切换"><a href="#切换" class="headerlink" title="切换"></a>切换</h3><ul><li>目的:提高可用性</li><li>手段:主从身份切换</li><li>收获:并发量的提升</li><li>问题:丢失切换时期数据</li></ul><br><h2 id="“三高”的实现"><a href="#“三高”的实现" class="headerlink" title="“三高”的实现"></a>“三高”的实现</h2><ul><li>高并发:通过复制和拓展，将数据分散至多节点</li><li>高性能:复制提升速度，拓展提升容量</li><li>高可用:节点间身份切换保证随时可用</li></ul><br><ul><li><strong>“三高”的集群也是以单点的高性能作为保障的。学习“三高”之前，应该学习如何提高单点性能</strong></li></ul><br><h2 id="如何提升单点性能"><a href="#如何提升单点性能" class="headerlink" title="如何提升单点性能"></a>如何提升单点性能</h2><ul><li><strong>建表:表结构合理，索引高效</strong><ul><li>B+树的数据结构与InnoDB的存储结构</li><li>InnoDB行记录格式的历史与原理</li><li>索引、数据约束、视图的注意事项</li></ul></li><li><strong>查询:优化SQL语句，选择正确索引</strong><ul><li>覆盖索引、索引下推、松散索引的原理与实战</li><li>排序、随机选取、COUNT的优化方法</li><li>索引失效时的排查方向</li></ul></li><li><strong>更新:正确使用锁，合理优化事务</strong><ul><li>MySQL和InnoDB日志体系</li><li>全局锁、表锁、元数据锁、行锁、间隙锁</li><li>死锁的原理与优化方法</li><li>事务与MVCC的原理与性能优化</li></ul></li></ul><br><h2 id="未来数据库发展趋势"><a href="#未来数据库发展趋势" class="headerlink" title="未来数据库发展趋势"></a>未来数据库发展趋势</h2><ul><li>MySQL8.0新特性</li><li>NewSQL数据库</li><li>新一代分布式数据库CockroachDB</li></ul><br><br><br><h1 id="第2章-环境搭建"><a href="#第2章-环境搭建" class="headerlink" title="第2章 环境搭建"></a>第2章 环境搭建</h1><ul><li>准备CentOS7环境</li></ul><br><h2 id="安装MySQL-5-7"><a href="#安装MySQL-5-7" class="headerlink" title="安装MySQL 5.7"></a>安装MySQL 5.7</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cd /install</span><br><span class="line"></span><br><span class="line">wget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.33-1.el7.x86_64.rpm-bundle.tar</span><br><span class="line"></span><br><span class="line">tar -xvf mysql-5.7.33-1.el7.x86_64.rpm-bundle.tar</span><br><span class="line"></span><br><span class="line">rpm -qa|grep  mariadb</span><br><span class="line">rpm -e --nodeps mariadb-libs-5.5.68-1.el7.x86_64</span><br><span class="line"></span><br><span class="line">rpm -ivh mysql-community-common-5.7.33-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line">rpm -ivh --force --nodeps  mysql-community-libs-5.7.33-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line">rpm -ivh mysql-community-client-5.7.33-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line">rpm -ivh --force --nodeps  mysql-community-server-5.7.33-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line">which mysql</span><br></pre></td></tr></table></figure><br><h2 id="MySQL的启停"><a href="#MySQL的启停" class="headerlink" title="MySQL的启停"></a>MySQL的启停</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysqld.service</span><br><span class="line"></span><br><span class="line">systemctl start mysqld.service</span><br><span class="line"></span><br><span class="line">systemctl stop mysqld.service</span><br></pre></td></tr></table></figure><br><h2 id="初始化配置"><a href="#初始化配置" class="headerlink" title="初始化配置"></a>初始化配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询安装后的初始化密码</span></span><br><span class="line">grep &#x27;temporary password&#x27; /var/log/mysqld.log</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set password=password(&quot;Happy2023@&quot;);</span><br><span class="line"></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password_policy=LOW;</span><br><span class="line"></span><br><span class="line">set global validate_password_length=4;</span><br><span class="line"></span><br><span class="line">set password=password(&quot;root&quot;);</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">永久打开防火墙3306端口</span></span><br><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line"></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;root&#x27; WITH GRANT OPTION;</span><br><span class="line"></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><br><br><br><h1 id="第3章-一个SQL语句如何执行"><a href="#第3章-一个SQL语句如何执行" class="headerlink" title="第3章 一个SQL语句如何执行"></a>第3章 一个SQL语句如何执行</h1><ul><li>有了电子表格，为什么还要数据库?</li></ul><blockquote><ol><li>数据库理论上没有行数上限。单机数据库若行数太多遇到性能问题，可以通过分库分表等技术解决</li><li>数据库有完备的结构化查询语言 (SQL)。Excel结构化查询功能不如数据库强大</li><li>数据库面向软件，提供软件接口。（Excel是文件级别的，直接面向终端用户）</li><li>数据库事务是关系型数据库的核心优势。（Excel没有事务，无法做到不同人的工作同时进行）</li><li>分布式 - 数据库的潜力巨大。数据库具有主备复制、高可用、分布式等形态。Excel天生是单体的，面向文件的</li></ol></blockquote><blockquote><p>电子表格面向个人，以文件为基础，拓展性差</p><p>数据库面向软件，支持事务、拓展性好</p></blockquote><br><h2 id="数据库软件的典型架构是怎样的"><a href="#数据库软件的典型架构是怎样的" class="headerlink" title="数据库软件的典型架构是怎样的?"></a>数据库软件的典型架构是怎样的?</h2><h2 id="常见软件架构"><a href="#常见软件架构" class="headerlink" title="常见软件架构"></a>常见软件架构</h2><h3 id="MVC-分层架构"><a href="#MVC-分层架构" class="headerlink" title="MVC 分层架构"></a>MVC 分层架构</h3><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.6ezeek610880.webp" width="60%"><br><h3 id="事件驱动架构"><a href="#事件驱动架构" class="headerlink" title="事件驱动架构"></a>事件驱动架构</h3><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.7ad2smjsads0.webp" width="60%"><br><h3 id="管道-过滤器架构"><a href="#管道-过滤器架构" class="headerlink" title="管道-过滤器架构"></a>管道-过滤器架构</h3><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.4r8jvxiitds0.webp" width="60%"><br><h3 id="微核架构"><a href="#微核架构" class="headerlink" title="微核架构"></a>微核架构</h3><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.jf0g5tzqe2o.webp" width="60%"><br><h2 id="MySQL软件架构是怎样的？"><a href="#MySQL软件架构是怎样的？" class="headerlink" title="MySQL软件架构是怎样的？"></a>MySQL软件架构是怎样的？</h2><ul><li>MySQL的软件架构</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.7cr8et2ktx00.webp" width="70%"><br><ul><li>以分层架构看MySQL架构</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.57w74vaulpw0.webp" width="70%"><br><ul><li>以管道过滤器-架构看MySQL架构</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.32mzf6nvr1q0.webp" width="70%"><br><ul><li>以微核-架构看MySQL架构</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.76a2jv90tok0.webp" width="70%"><br><ul><li>软件工程当中有很多经典的架构设计</li><li>大型软件往往不是使用单一的架构设计，而是多种混合</li><li>研究问题要有清晰的视野，分清楚微观和宏观</li><li>理论要灵活实践，不要死读书</li></ul><br><h2 id="客户端怎样连接MySQL数据库"><a href="#客户端怎样连接MySQL数据库" class="headerlink" title="客户端怎样连接MySQL数据库"></a>客户端怎样连接MySQL数据库</h2><h3 id="客户端与MySQL的连接方式"><a href="#客户端与MySQL的连接方式" class="headerlink" title="客户端与MySQL的连接方式"></a>客户端与MySQL的连接方式</h3><ul><li><strong>TCP/IP 连接</strong><ul><li>TCP/IP 连接是MySQL在任何平台上都提供的连接方法</li><li>TCP/IP是目前互联网最主流的网络连接方式</li></ul></li><li><strong>命名管道</strong><ul><li>命名管道:同一台服务器通讯 (Windows)</li><li>命名管道开启方式:–enable-named-pipe</li></ul></li><li><strong>共享内存</strong><ul><li>服务端:配置-shared-memory</li><li>客户端:配置-protocol=memory</li></ul></li><li><strong>UNIX套接字</strong><ul><li>服务端:配置-socket=/tmp/mysql.sock</li><li>客户端:配置-S =/tmp/mysql.sock</li></ul></li></ul><br><h3 id="MySQL-TCP通讯协议"><a href="#MySQL-TCP通讯协议" class="headerlink" title="MySQL TCP通讯协议"></a>MySQL TCP通讯协议</h3><ul><li><strong>三次握手建立TCP连接</strong></li><li><strong>认证连接</strong><ul><li>服务端-&gt;客户端:发送握手初始化包</li><li>客户端-&gt;服务端:发送验证</li><li>服务端-&gt;客户端:认证结果消息</li></ul></li><li><strong>认证通过之后，客户端开始与服务端之间交互</strong><ul><li>客户端-&gt;服务端:发送命令包(Command Packet)</li><li>服务端-&gt;客户端:发送回应包</li></ul></li><li><strong>断开MySQL连接</strong><ul><li>客户端-&gt;服务器:发送退出命令包</li></ul></li><li><strong>四次握手断开TCP连接</strong></li></ul><br><ul><li>MySQL TCP 报文格式<ul><li>消息头:3字节报文长度、1字节序号</li><li>消息体:1字节指令、其余为参数</li><li>指令举例: 切换数据库(0x02)、查询命令(0x03)</li></ul></li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.19gzatr3rmio.webp" width="70%"><br><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul><li>TCP/IP 连接是MySQL最常用的连接方式</li><li>TCP/IP连接报文可以作为其他C/S架构的参考</li><li>其他连接方式均限于本机连接，使用范围有限</li></ul><br><h2 id="一个SQL语句是怎样执行的"><a href="#一个SQL语句是怎样执行的" class="headerlink" title="一个SQL语句是怎样执行的"></a>一个SQL语句是怎样执行的</h2><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/e9facc452b4200abad559eb2c9f4c39.380nurymdlm0.webp" width="70%"><br><h3 id="查询缓存"><a href="#查询缓存" class="headerlink" title="查询缓存"></a>查询缓存</h3><ul><li>之前执行过的语句会KV的形式缓存在内存中</li><li>查询之前先查找之前执行过的相同语句</li><li>不推荐使用缓存:数据表修改后，会删除所有相关缓存</li></ul><br><h3 id="分析器"><a href="#分析器" class="headerlink" title="分析器"></a>分析器</h3><ul><li>分析器的作用是知道你要“干什么“</li><li>先做词法分析，识别SQL语句中的关键字</li><li>再做句法分析，判断SQL语句是否符合语法</li></ul><br><h3 id="优化器"><a href="#优化器" class="headerlink" title="优化器"></a>优化器</h3><ul><li>优化器的作用是要知道“怎么做”</li><li>优化器的主要工作是决定如何使用索引</li></ul><br><h3 id="执行器"><a href="#执行器" class="headerlink" title="执行器"></a>执行器</h3><ul><li>执行器的主要工作是校验权限、调用存储引擎</li><li>执行器首先校验此用户对目标数据有无权限</li><li>执行器会以行为粒度，调用存储引擎，执行SQL</li><li>在没有索引的情况下，执行器会循环查询所有行</li></ul><br><h3 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h3><ul><li>存储引擎的任务是将执行器的指令落实在数据文件上</li><li>不同存储引擎的原理和执行方法有很大不同</li></ul><br><h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><ul><li>SQL语句执行的过程涉及到了MySQL几乎所有的模块</li><li>一个SQL语句是按照分析-优化-执行-落盘的步骤执行的</li><li>MySQL8.0之后已经停用了缓存功能</li></ul><br><h2 id="四种常见的MySQL存储引擎"><a href="#四种常见的MySQL存储引擎" class="headerlink" title="四种常见的MySQL存储引擎"></a>四种常见的MySQL存储引擎</h2><ul><li><strong>InnoDB</strong><ul><li>MySQL5.5.5之后的默认存储引擎</li><li>支持事务、外键</li><li>支持崩溃修复能力和并发控制</li></ul></li><li><strong>MyISAM</strong><ul><li>MySQL 5.5.5之前的默认存储引擎</li><li>插入数据快</li><li>空间利用率高</li><li>不支持事务</li></ul></li><li><strong>Memory</strong><ul><li>所有的数据都在内存中，速度快</li><li>数据安全性差</li></ul></li><li><strong>Archive</strong><ul><li>数据压缩、空间利用率高</li><li>插入速度快</li><li>不支持索引，查询性能差</li></ul></li></ul><br><h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><ul><li>InnoDB是目前最主流的存储引擎，适合各种互联网业务</li><li>查询效率要求非常高的可以考虑MyISAM</li><li>日志信息归档可以考虑Archive</li><li>临时表可以考虑MEMORY</li></ul><br><br><br><h1 id="第4章-如何建表更符合业务"><a href="#第4章-如何建表更符合业务" class="headerlink" title="第4章 如何建表更符合业务"></a>第4章 如何建表更符合业务</h1><h2 id="索引组织表-Index-Organized-Table"><a href="#索引组织表-Index-Organized-Table" class="headerlink" title="索引组织表(Index Organized Table)"></a>索引组织表(Index Organized Table)</h2><ul><li>索引组织表不是一种“组织表“</li><li>索引组织表是由索引“组织起来的”表</li><li>InnoDB中，表都是根据主键顺序组织存放的</li></ul><br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><ol><li>大多数情况下，都应该举一反三，比如课程中讲的mysql架构，应该好好熟悉。但是还有呢对应的课程专门讲解mysql架构，所以在本门课程中，我们只需要熟悉最核心的知识，或者熟悉本门课程的知识即可，其它重要的知识点在其它课程中好好学习即可。所以学习其它知识、课程亦是如此。（把握每个课程的重点，各个击破。达到系统掌握整体的目的）</li><li>注意识别课程中提到的知识，哪些是特别重要的，比如本门课程中，常见架构很重要，但是本门课并不专门讲解架构，所以应该后续找对应的课程，学习架构知识。</li><li>课程提到的mysql架构、tcp连接，都是很重要的知识，需要再深入理解。（一些底层基础知识很重要）</li></ol></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="50%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第1章-课程介绍&quot;&gt;&lt;a href=&quot;#第1章-课程介绍&quot; class=&quot;headerlink&quot; title=&quot;第1章 课程介绍&quot;&gt;&lt;/a&gt;第1章 课程介绍&lt;/h1&gt;&lt;h2 id=&quot;问卷调查&quot;&gt;&lt;a href=&quot;#问卷调查&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/Categories/DataBase/"/>
    
    <category term="MySQL" scheme="https://ratears.github.io/dev.ratears.life/Categories/DataBase/MySQL/"/>
    
    
    <category term="MySQL" scheme="https://ratears.github.io/dev.ratears.life/Tags/MySQL/"/>
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/Tags/DataBase/"/>
    
  </entry>
  
  <entry>
    <title>Linux 常用基础操作</title>
    <link href="https://ratears.github.io/dev.ratears.life/Linux-%E5%B8%B8%E7%94%A8%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/"/>
    <id>https://ratears.github.io/dev.ratears.life/Linux-%E5%B8%B8%E7%94%A8%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/</id>
    <published>2023-02-11T09:26:36.000Z</published>
    <updated>2023-02-11T09:26:36.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h1 id="SELinux"><a href="#SELinux" class="headerlink" title="SELinux"></a>SELinux</h1><ul><li>SELinux是Linux2.6以上版本捆绑的一个安全模块</li><li>SELinux配置复杂，容易跟其他程序冲突，所以建议关闭</li></ul><ul><li>关闭SELinux</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/selinux/config</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置SELINUX=disabled，重启系统</span></span><br></pre></td></tr></table></figure><br><br><br><h1 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h1><ul><li>替换yum源</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新缓存</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><br><br><br><h1 id="Linux防火墙"><a href="#Linux防火墙" class="headerlink" title="Linux防火墙"></a>Linux防火墙</h1><br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><p>1</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="70%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;h1 id=&quot;SELinux&quot;&gt;&lt;a href=&quot;#SELinux&quot; class=&quot;headerlink&quot; title=&quot;SELinux&quot;&gt;&lt;/</summary>
      
    
    
    
    <category term="Linux" scheme="https://ratears.github.io/dev.ratears.life/Categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://ratears.github.io/dev.ratears.life/Tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>《阿里新零售数据库设计与实战》study notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/%E3%80%8A%E9%98%BF%E9%87%8C%E6%96%B0%E9%9B%B6%E5%94%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8Bstudy-notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/%E3%80%8A%E9%98%BF%E9%87%8C%E6%96%B0%E9%9B%B6%E5%94%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8Bstudy-notes/</id>
    <published>2023-02-06T00:18:07.000Z</published>
    <updated>2023-02-06T00:18:07.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul><li>从设计到落地，提升数据库“技术&amp;业务”综合能力</li><li>相当于参与了真实项目的数据库设计[开发经验很难得]</li><li>具备设计完整数据库平台的能力[设计思想要跟上]</li><li>驾驭新零售数据库混合式集群[特别牛的技术]</li></ul><br><br><br><h1 id="新零售是什么"><a href="#新零售是什么" class="headerlink" title="新零售是什么"></a>新零售是什么</h1><ul><li>雷军：新零售是更高效率的零售，我们要从线上回到线下</li><li>马云：线下与线上零售将深度结合，加上现代物流平台，构成未来的新零售</li><li>商务部：以消费者为中心，以技术创新为驱动的零售模新式</li></ul><ul><li>新零售线上业务仅是电商吗？</li></ul><blockquote><p>线上业务不局限于电商，还包括了在线教育、医疗服务，以及金融业务等等</p></blockquote><ul><li>新零售的线下业务</li></ul><blockquote><p>利用云计算、大数据，以及人工智能技术，将客户分流到线下门店中，让用户体验到定制化的服务</p></blockquote><ul><li>新零售平台构成</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.2hkwqsnfv780.webp" width="60%"><br><br><br><h1 id="前导知识"><a href="#前导知识" class="headerlink" title="前导知识"></a>前导知识</h1><h2 id="Linux环境准备"><a href="#Linux环境准备" class="headerlink" title="Linux环境准备"></a>Linux环境准备</h2><h3 id="关闭SELinux"><a href="#关闭SELinux" class="headerlink" title="关闭SELinux"></a>关闭SELinux</h3><ul><li>SELinux是Linux2.6以上版本捆绑的一个安全模块</li><li>SELinux配置复杂，容易跟其他程序冲突，所以建议关闭</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/selinux/config</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置SELINUX=disabled，重启系统</span></span><br></pre></td></tr></table></figure><br><h3 id="替换yum源"><a href="#替换yum源" class="headerlink" title="替换yum源"></a>替换yum源</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新缓存</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><br><h2 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h2><h3 id="在线安装MySQL"><a href="#在线安装MySQL" class="headerlink" title="在线安装MySQL"></a>在线安装MySQL</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载rpm文件</span></span><br><span class="line">yum localinstall https://repo.mysql.com//mysql80-community-release-el7-1.noarch.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装MySQL</span></span><br><span class="line">yum install mysal-community-server -y</span><br></pre></td></tr></table></figure><br><h3 id="本地安装MySQL"><a href="#本地安装MySQL" class="headerlink" title="本地安装MySQL"></a>本地安装MySQL</h3><ul><li>离线下载安装</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载MySQL压缩包文件，并上传到/root/mysql目录</span></span><br><span class="line">mysql-8.0.11-1.el7.x86 64.rpm-bundle.tar</span><br><span class="line"></span><br><span class="line">tar xvf mysgl-8.0.11-1.el7.x86 64.rpm-bundle.tar</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装第三方依赖包</span></span><br><span class="line">yum install perl -y</span><br><span class="line">yum install net-tools -y</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载系统自带的mariadb</span></span><br><span class="line">rpm -qa |grep mariadb</span><br><span class="line">rpm -e mariadb-libs-5.5.68-1.el7.x86_64 --nodeps</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装MySQL程序包</span></span><br><span class="line">rpm -ivh mysql-community-common-8.0.11-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-libs-8.0.11-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-client-8.0.11-1.el7.x86 64.rpm</span><br><span class="line">rpm -ivh mysql-community-server-8.0.11-1.el7.x86 64.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改/var/lib/mysql目录访问权限</span></span><br><span class="line">chmod -R 777 /var/lib/mysql/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">初始化，初始化数据目录，生成必要的文件，生成root密码</span></span><br><span class="line">mysqld --initialize</span><br><span class="line">chmod -R 777 /var/lib/mysql/*</span><br></pre></td></tr></table></figure><ul><li>启动</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动数据库</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在线安装使用：</span></span><br><span class="line">service mysql start</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">离线本地安装使用：</span></span><br><span class="line">service mysqld start</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看初始化密码</span></span><br><span class="line">grep&#x27;temporary password’ /var/log/mysqld.log</span><br></pre></td></tr></table></figure><ul><li>修改root密码</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本地登录数据库</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改root密码</span></span><br><span class="line">alter user user)) identified by &quot;abc123456&quot;;</span><br></pre></td></tr></table></figure><ul><li>允许root远程登录</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">允许远程使用root账户</span></span><br><span class="line">UPDATE user SET host = %&#x27; WHERE user =&#x27;root&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改/etc/my.cnf文件</span></span><br><span class="line">character set server = utf8</span><br><span class="line">bind-address = 0.0.0.0</span><br></pre></td></tr></table></figure><ul><li>系统防火墙开放3306端口</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd--zone=public  --add-port=3306/tcp --permanent</span><br><span class="line"></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><br><h2 id="业务数据库设计流程"><a href="#业务数据库设计流程" class="headerlink" title="业务数据库设计流程"></a>业务数据库设计流程</h2><ul><li>需求分析：根据用户的需求，分析出需要记录的数据</li><li>概要设计：根据分析出的数据，设计ER图</li><li>详细设计：将ER图转换成数据库模型图和数据表</li></ul><br><h2 id="业务数据设计模型"><a href="#业务数据设计模型" class="headerlink" title="业务数据设计模型"></a>业务数据设计模型</h2><ul><li>瀑布模型</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.3aas4yr220e0.webp" width="40%"><br><ul><li>螺旋模型</li></ul><img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.66x4m6vejbk0.webp" width="40%"><br><br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><p>1</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="70%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;从设计到落地，提升数据库“技术&amp;amp;业务”综合能力&lt;/li&gt;
&lt;li&gt;相当于参与了真实项目的数据库设计[开发经验很难得]&lt;/</summary>
      
    
    
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/Categories/DataBase/"/>
    
    <category term="MySQL" scheme="https://ratears.github.io/dev.ratears.life/Categories/DataBase/MySQL/"/>
    
    
    <category term="MySQL" scheme="https://ratears.github.io/dev.ratears.life/Tags/MySQL/"/>
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/Tags/DataBase/"/>
    
  </entry>
  
</feed>
